(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ff2a559e"],{1255:function(e,t,i){"use strict";i("51eb")},"13d5":function(e,t,i){"use strict";var s=i("23e7"),r=i("d58f").left,a=i("a640"),c=i("2d00"),n=i("605d"),o=a("reduce"),d=!n&&c>79&&c<83;s({target:"Array",proto:!0,forced:!o||d},{reduce:function(e){return r(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"2c69":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"order-confirm"},[i("div",{staticClass:"wrapper"},[i("div",{staticClass:"container"},[i("div",{staticClass:"order-box"},[i("div",{staticClass:"item-address"},[i("h2",{staticClass:"addr-title"},[e._v("收货地址")]),i("div",{staticClass:"addr-list clearfix"},[e._l(e.list,(function(t){return i("div",{key:t.id,staticClass:"addr-info",class:{checked:t.id===e.checkId},on:{click:function(i){e.checkId=t.id}}},[i("h2",[e._v(e._s(t.receiverName))]),i("div",{staticClass:"phone"},[e._v(e._s(t.receiverMobile))]),i("div",{staticClass:"street"},[e._v(" "+e._s(t.receiverProvince+" "+t.receiverCity+" "+t.receiverDistrict)+" "),i("br"),e._v(e._s(t.receiverAddress)+" ")]),i("div",{staticClass:"action"},[i("a",{staticClass:"fl",attrs:{href:"javascript:;"},on:{click:function(i){return e.delAddress(t)}}},[i("i",{staticClass:"icon el-icon-delete"})]),i("a",{staticClass:"fr",attrs:{href:"javascript:;"},on:{click:function(i){return e.editAddressModal(t)}}},[i("i",{staticClass:"icon el-icon-edit-outline"})])])])})),i("div",{staticClass:"addr-add",on:{click:e.openAddressModal}},[i("div",{staticClass:"icon-add"}),i("div",[e._v("添加新地址")])])],2)]),i("div",{staticClass:"item-good"},[i("h2",[e._v("商品")]),i("ul",e._l(e.cartList,(function(t){return i("li",{key:t.productId},[i("div",{staticClass:"good-name"},[i("img",{attrs:{src:t.productMainImage}}),i("span",[e._v(e._s(t.productName))])]),i("div",{staticClass:"good-price"},[e._v(e._s(t.productPrice)+"元x"+e._s(t.quantity))]),i("div",{staticClass:"good-total"},[e._v(e._s(t.productTotalPrice)+"元")])])})),0)]),e._m(0),e._m(1),i("div",{staticClass:"detail"},[i("div",{staticClass:"item"},[i("span",{staticClass:"item-name"},[e._v("商品件数：")]),i("span",{staticClass:"item-val"},[e._v(e._s(e.count)+"件")])]),i("div",{staticClass:"item"},[i("span",{staticClass:"item-name"},[e._v("商品总价：")]),i("span",{staticClass:"item-val"},[e._v(e._s(e.cartTotalPrice)+"元")])]),e._m(2),e._m(3),i("div",{staticClass:"item-total"},[i("span",{staticClass:"item-name"},[e._v("应付总额：")]),i("span",{staticClass:"item-val"},[e._v(e._s(e.cartTotalPrice)+"元")])])]),i("div",{staticClass:"btn-group"},[i("a",{staticClass:"btn btn-default btn-large",attrs:{href:"/#/cart"},on:{click:e.goCart}},[e._v("返回购物车")]),i("a",{staticClass:"btn btn-large",attrs:{href:"javascript:;"},on:{click:e.orderSubmit}},[e._v("去结算")])])])])]),i("modal",{attrs:{title:"删除确认",btnType:3,showModal:e.showDelModal},on:{cancel:function(t){e.showDelModal=!1},submit:e.submitAddress},scopedSlots:e._u([{key:"body",fn:function(){return[i("p",[e._v("您确认要删除此地址吗？")])]},proxy:!0}])}),i("modal",{attrs:{title:"确认新增",btnType:3,showModal:e.showEditModal},on:{cancel:function(t){e.showEditModal=!1},submit:e.submitAddress},scopedSlots:e._u([{key:"body",fn:function(){return[i("div",{staticClass:"edit-wrap"},[i("div",{staticClass:"item"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedItem.receiverName,expression:"checkedItem.receiverName"}],staticClass:"input",attrs:{type:"text",placeholder:"姓名"},domProps:{value:e.checkedItem.receiverName},on:{input:function(t){t.target.composing||e.$set(e.checkedItem,"receiverName",t.target.value)}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedItem.receiverMobile,expression:"checkedItem.receiverMobile"}],staticClass:"input",attrs:{type:"text",placeholder:"手机号"},domProps:{value:e.checkedItem.receiverMobile},on:{input:function(t){t.target.composing||e.$set(e.checkedItem,"receiverMobile",t.target.value)}}})]),i("div",{staticClass:"item"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.checkedItem.receiverProvince,expression:"checkedItem.receiverProvince"}],attrs:{name:"province"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.checkedItem,"receiverProvince",t.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"北京"}},[e._v("北京")]),i("option",{attrs:{value:"天津"}},[e._v("天津")]),i("option",{attrs:{value:"河北"}},[e._v("河北")])]),i("select",{directives:[{name:"model",rawName:"v-model",value:e.checkedItem.receiverCity,expression:"checkedItem.receiverCity"}],attrs:{name:"city"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.checkedItem,"receiverCity",t.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"北京"}},[e._v("北京")]),i("option",{attrs:{value:"天津"}},[e._v("天津")]),i("option",{attrs:{value:"石家庄"}},[e._v("石家庄")])]),i("select",{directives:[{name:"model",rawName:"v-model",value:e.checkedItem.receiverDistrict,expression:"checkedItem.receiverDistrict"}],attrs:{name:"district"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.checkedItem,"receiverDistrict",t.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"昌平区"}},[e._v("昌平区")]),i("option",{attrs:{value:"海淀区"}},[e._v("海淀区")]),i("option",{attrs:{value:"东城区"}},[e._v("东城区")]),i("option",{attrs:{value:"西城区"}},[e._v("西城区")]),i("option",{attrs:{value:"顺义区"}},[e._v("顺义区")]),i("option",{attrs:{value:"房山区"}},[e._v("房山区")])])]),i("div",{staticClass:"item"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.checkedItem.receiverAddress,expression:"checkedItem.receiverAddress"}],attrs:{name:"street"},domProps:{value:e.checkedItem.receiverAddress},on:{input:function(t){t.target.composing||e.$set(e.checkedItem,"receiverAddress",t.target.value)}}})]),i("div",{staticClass:"item"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedItem.receiverZip,expression:"checkedItem.receiverZip"}],staticClass:"input",attrs:{type:"text",placeholder:"邮编"},domProps:{value:e.checkedItem.receiverZip},on:{input:function(t){t.target.composing||e.$set(e.checkedItem,"receiverZip",t.target.value)}}})])])]},proxy:!0}])})],1)},r=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"item-shipping"},[i("h2",[e._v("配送方式")]),i("span",[e._v("包邮")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"item-invoice"},[i("h2",[e._v("发票")]),i("a",{attrs:{href:"javascript:;"}},[e._v("电子发票")]),i("a",{attrs:{href:"javascript:;"}},[e._v("个人")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"item"},[i("span",{staticClass:"item-name"},[e._v("优惠活动：")]),i("span",{staticClass:"item-val"},[e._v("0元")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"item"},[i("span",{staticClass:"item-name"},[e._v("运费：")]),i("span",{staticClass:"item-val"},[e._v("0元")])])}],a=(i("4de4"),i("13d5"),i("714b")),c={name:"order-confirm",data:function(){return{list:[],cartList:[],showEditModal:!1,cartTotalPrice:0,count:0,checkedItem:{},userAction:"",showDelModal:!1,checkId:""}},components:{Modal:a["a"]},mounted:function(){this.getAddressList(),this.getCartList()},methods:{getAddressList:function(){var e=this;this.axios.get("/shippings").then((function(t){e.list=t.list}))},delAddress:function(e){this.checkedItem=e,this.userAction=2,this.showDelModal=!0},editAddressModal:function(e){this.checkedItem=e,this.userAction=1,this.showEditModal=!0},openAddressModal:function(){this.checkedItem={},this.userAction=0,this.showEditModal=!0},submitAddress:function(){var e,t,i=this,s=this.checkedItem,r=this.userAction,a={};if(0===r||1===r){var c=s.receiverName,n=s.receiverMobile,o=s.receiverProvince,d=s.receiverCity,l=s.receiverDistrict,v=s.receiverAddress,u=s.receiverZip,m="";if(c?n&&/\d{11}/.test(n)?o?d?l&&v?u&&/\d{6}/.test(u)||(m="请输入6位邮编！"):m="请输入收货地址！":m="请选择对应的城市！":m="请选择对应的省份！":m="请输入正确格式的手机号码！":m="请输入收货人名称！",m)return void this.$message.error(m);a={receiverName:c,receiverMobile:n,receiverProvince:o,receiverCity:d,receiverDistrict:l,receiverAddress:v,receiverZip:u}}switch(r){case 0:e="post",t="/shippings";break;case 1:e="put",t="/shippings/".concat(s.id);break;case 2:e="delete",t="/shippings/".concat(s.id);break;default:break}this.axios[e](t,a).then((function(){i.closeModal(),i.getAddressList(),i.$message.success("操作成功！")}))},getCartList:function(){var e=this;this.axios.get("/carts").then((function(t){e.cartList=t.cartProductVoList.filter((function(e){return e.productSelected})),e.cartTotalPrice=t.cartTotalPrice,e.count=e.cartList.reduce((function(e,t){return e+t.quantity}),0)}))},closeModal:function(){this.checkedItem={},this.userAction="",this.showDelModal=!1,this.showEditModal=!1},goCart:function(){this.$router.push("/cart")},orderSubmit:function(){var e=this,t=this.list.some((function(t){return t.id===e.checkId}));t?this.axios.post("/orders",{shippingId:this.checkId}).then((function(t){e.$router.push({path:"/order/pay",query:{orderNo:t.orderNo}})})):this.$message.error("请选择一个收货地址！")}}},n=c,o=(i("1255"),i("2877")),d=Object(o["a"])(n,s,r,!1,null,null,null);t["default"]=d.exports},"51eb":function(e,t,i){},d58f:function(e,t,i){var s=i("1c0b"),r=i("7b0b"),a=i("44ad"),c=i("50c4"),n=function(e){return function(t,i,n,o){s(i);var d=r(t),l=a(d),v=c(d.length),u=e?v-1:0,m=e?-1:1;if(n<2)while(1){if(u in l){o=l[u],u+=m;break}if(u+=m,e?u<0:v<=u)throw TypeError("Reduce of empty array with no initial value")}for(;e?u>=0:v>u;u+=m)u in l&&(o=i(o,l[u],u,d));return o}};e.exports={left:n(!1),right:n(!0)}}}]);